# 花生网文无限流小说生成平台 - 桌面应用安装说明

## 系统要求

### Windows
- Windows 7 或更高版本
- 64位操作系统
- 至少 2GB 内存
- 至少 500MB 可用磁盘空间

### macOS
- macOS 10.13 (High Sierra) 或更高版本
- 64位处理器
- 至少 2GB 内存
- 至少 500MB 可用磁盘空间

### Linux
- Ubuntu 18.04 或更高版本
- Fedora 28 或更高版本
- 至少 2GB 内存
- 至少 500MB 可用磁盘空间

## 安装方法

### 方法一：使用安装包安装（推荐）

1. **下载安装包**：
   - Windows：`peanut-infinite-app Setup X.X.X.exe`
   - macOS：`peanut-infinite-app-X.X.X.dmg`
   - Linux：`peanut-infinite-app_X.X.X_amd64.deb` 或 `peanut-infinite-app-X.X.X.x86_64.rpm`

2. **运行安装程序**：
   - Windows：双击 `.exe` 文件，按照安装向导完成安装
   - macOS：双击 `.dmg` 文件，将应用拖放到 Applications 文件夹
   - Linux：
     - Debian/Ubuntu：`sudo dpkg -i peanut-infinite-app_X.X.X_amd64.deb`
     - Fedora：`sudo rpm -i peanut-infinite-app-X.X.X.x86_64.rpm`

3. **启动应用**：
   - 从开始菜单（Windows）、Launchpad（macOS）或应用菜单（Linux）启动花生网文

### 方法二：使用便携版（无需安装）

1. **下载便携版**：
   - Windows：`peanut-infinite-app-X.X.X-win32-x64.zip`
   - Linux：`peanut-infinite-app-X.X.X.AppImage`

2. **解压文件**：
   - Windows：将 ZIP 文件解压到任意位置
   - Linux：使 AppImage 文件可执行：`chmod +x peanut-infinite-app-X.X.X.AppImage`

3. **运行应用**：
   - Windows：双击 `peanut-infinite-app.exe`
   - Linux：双击 AppImage 文件

## 首次运行

1. **应用启动**：
   - 首次启动时，应用会自动初始化环境并启动后端服务器
   - 可能需要几秒钟时间，请耐心等待

2. **Ollama 连接**：
   - 应用会尝试连接本地的 Ollama 服务
   - 如果 Ollama 未运行或未安装，会显示连接失败的提示
   - 即使 Ollama 连接失败，应用仍可使用模拟数据运行

3. **用户注册/登录**：
   - 点击右上角的"注册"按钮创建账号
   - 或使用已有账号登录
   - 登录后可参与绩分系统

## 功能使用

### 1. 无限流小说生成

1. **输入故事引子**：
   - 在"故事引子"文本框中输入小说的开头或创意
   - 可选：从文学数据库中提取元素作为引子

2. **启动生成**：
   - 点击"启动无限流生成"按钮
   - 系统会自动生成小说内容，并持续更新

3. **干预情节**：
   - 点击"暂停并干预情节"按钮
   - 输入您的情节想法
   - 点击"确认并继续生成"，系统会根据您的想法调整故事走向

### 2. 文学因子管理

1. **贡献文学因子**：
   - 点击"贡献文学因子"按钮
   - 上传文本文件或输入文学内容
   - 贡献成功后获得 1 分奖励

2. **使用文学因子**：
   - 从文学数据库中选择因子
   - 点击使用按钮
   - 扣除 5 分绩分

### 3. 绩分系统

- **获得绩分**：
  - 贡献文学因子：+1 分
  - 生成新小说并保存：+2 分

- **消耗绩分**：
  - 使用他人贡献的文学因子：-5 分

### 4. 小说管理

1. **保存小说**：
   - 点击"保存小说"按钮
   - 小说会保存到应用数据目录的 `saved-novels` 文件夹
   - 同时获得 2 分绩分奖励

2. **查看保存的小说**：
   - Windows：`C:\Users\用户名\AppData\Roaming\peanut-infinite-app\saved-novels`
   - macOS：`/Users/用户名/Library/Application Support/peanut-infinite-app/saved-novels`
   - Linux：`/home/用户名/.config/peanut-infinite-app/saved-novels`

## 常见问题

### 1. 应用启动失败

**可能原因**：
- 端口 3000 被其他应用占用
- 缺少必要的依赖文件
- 权限不足

**解决方案**：
- 关闭占用端口 3000 的应用
- 重新安装应用
- 以管理员权限运行应用

### 2. Ollama 连接失败

**可能原因**：
- Ollama 未安装
- Ollama 服务未运行
- 网络配置问题

**解决方案**：
- 下载并安装 Ollama：https://ollama.com/download
- 启动 Ollama 服务
- 确保本地网络连接正常

### 3. 小说保存失败

**可能原因**：
- 磁盘空间不足
- 权限不足
- 路径不存在

**解决方案**：
- 清理磁盘空间
- 以管理员权限运行应用
- 检查应用数据目录权限

### 4. 绩分不更新

**可能原因**：
- 未登录用户
- 网络连接问题
- 服务器错误

**解决方案**：
- 确保已登录账号
- 检查网络连接
- 重启应用

## 技术支持

如果遇到其他问题，请：

1. **查看日志文件**：
   - Windows：`C:\Users\用户名\AppData\Roaming\peanut-infinite-app\logs`
   - macOS：`/Users/用户名/Library/Application Support/peanut-infinite-app/logs`
   - Linux：`/home/用户名/.config/peanut-infinite-app/logs`

2. **联系支持**：
   - 提供详细的问题描述和日志文件
   - 我们会尽快回复并提供解决方案

## 版本更新

应用会定期检查更新，如有新版本发布，会在启动时提示您更新。

您也可以访问官方网站手动下载最新版本。

---

祝您使用愉快！

花生网文无限流小说生成平台开发团队
